<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI Assistant - Powered by bekimoon</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --primary-light: #5a75f0;
            --secondary: #3f37c9;
            --accent: #4895ef;
            --dark: #2b2d42;
            --light: #f8f9fa;
            --success: #4cc9f0;
            --warning: #f72585;
            --card-bg: #ffffff;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --gradient: linear-gradient(135deg, #4361ee, #3a0ca3);
            --ai-bg: #f0f7ff;
            --user-bg: #4361ee;
            --text-dark: #2b2d42;
            --text-light: #ffffff;
            --border-radius: 16px;
            --input-height: 56px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e7f4 100%);
            min-height: 100vh;
            padding: 15px;
            color: var(--text-dark);
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 900px;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        /* Header Styles */
        header {
            text-align: center;
            padding: 15px 0 20px;
            position: relative;
            margin-bottom: 10px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 15px;
        }
        
        .logo-icon {
            width: 50px;
            height: 50px;
            background: var(--gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .logo-icon i {
            font-size: 1.8rem;
            color: white;
        }
        
        h1 {
            font-size: 1.8rem;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 8px;
            letter-spacing: -0.5px;
            font-weight: 700;
        }
        
        .subtitle {
            font-size: 1rem;
            color: #6c757d;
            max-width: 600px;
            margin: 0 auto 15px;
            line-height: 1.5;
            padding: 0 15px;
        }
        
        /* Chat Container */
        .chat-container {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative;
            border: 1px solid rgba(67, 97, 238, 0.1);
        }
        
        .chat-header {
            background: var(--gradient);
            color: white;
            padding: 15px 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .model-info {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 6px 14px;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .connection-status {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 6px 14px;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }
        
        .status-connected {
            background-color: #4ade80;
        }
        
        .status-disconnected {
            background-color: #f87171;
        }
        
        /* Chat Messages */
        .chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
            scroll-behavior: smooth;
            background: #fafbff;
        }
        
        .message {
            max-width: 85%;
            padding: 15px 18px;
            border-radius: 18px;
            line-height: 1.5;
            position: relative;
            animation: fadeIn 0.3s ease-out;
            box-shadow: var(--shadow);
            font-size: 1rem;
            word-wrap: break-word;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .user-message {
            align-self: flex-end;
            background: var(--user-bg);
            color: var(--text-light);
            border-bottom-right-radius: 5px;
        }
        
        .ai-message {
            align-self: flex-start;
            background: var(--ai-bg);
            color: var(--text-dark);
            border-bottom-left-radius: 5px;
        }
        
        /* Chat Input */
        .chat-input-container {
            padding: 15px;
            background: white;
            border-top: 1px solid #e9ecef;
            display: flex;
            gap: 12px;
        }
        
        .chat-input {
            flex: 1;
            display: flex;
            background: #f0f4ff;
            border-radius: 30px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        
        .chat-input input {
            flex: 1;
            padding: 0 18px;
            border: none;
            background: transparent;
            font-size: 1rem;
            outline: none;
            height: var(--input-height);
        }
        
        .send-btn {
            background: var(--gradient);
            color: white;
            border: none;
            width: var(--input-height);
            height: var(--input-height);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        
        .send-btn:disabled {
            background: #adb5bd;
            cursor: not-allowed;
        }
        
        .send-btn i {
            font-size: 1.2rem;
        }
        
        /* Typing Indicator */
        .typing-indicator {
            display: none;
            align-items: center;
            padding: 12px 18px;
            background: var(--ai-bg);
            border-radius: 18px;
            align-self: flex-start;
        }
        
        .typing-indicator span {
            height: 8px;
            width: 8px;
            background: var(--accent);
            border-radius: 50%;
            display: inline-block;
            margin: 0 2px;
            animation: bounce 1.3s infinite;
        }
        
        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-4px); }
        }
        
        /* Example Questions */
        .example-questions {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
            margin: 15px 0 20px;
            padding: 0 10px;
        }
        
        .example-question {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 50px;
            padding: 10px 18px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100%;
        }
        
        .example-question:hover, .example-question:active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            box-shadow: 0 4px 8px rgba(67, 97, 238, 0.2);
            transform: translateY(-2px);
        }
        
        /* Error Message */
        .error-message {
            background: #ffecec;
            color: #ff5252;
            padding: 12px;
            border-radius: 10px;
            margin: 10px 0;
            display: none;
            border-left: 4px solid #ff5252;
            font-size: 0.9rem;
        }
        
        /* Typing Animation */
        .typing-text {
            display: inline;
        }
        
        .typing-cursor {
            display: inline-block;
            width: 8px;
            height: 1.2em;
            background: var(--accent);
            margin-left: 2px;
            animation: blink 0.7s infinite;
            vertical-align: middle;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }
        
        /* Scrollbar styling */
        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }
        
        .chat-messages::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        .chat-messages::-webkit-scrollbar-thumb {
            background: #c5c5c5;
            border-radius: 10px;
        }
        
        .chat-messages::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
        
        .scroll-indicator {
            position: absolute;
            bottom: 75px;
            right: 20px;
            background: rgba(67, 97, 238, 0.9);
            color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            opacity: 0;
            transition: opacity 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .scroll-indicator.visible {
            opacity: 1;
        }
        
        /* Footer */
        footer {
            text-align: center;
            padding: 20px 0 10px;
            color: #6c757d;
            font-size: 0.85rem;
            margin-top: 15px;
        }
        
        .powered-by {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            color: #6c757d;
            margin-top: 8px;
            font-size: 0.8rem;
        }
        
        /* Mobile-specific styles */
        @media (max-width: 768px) {
            :root {
                --input-height: 50px;
                --border-radius: 14px;
            }
            
            body {
                padding: 10px;
            }
            
            header {
                padding: 10px 0 15px;
            }
            
            h1 {
                font-size: 1.6rem;
            }
            
            .logo-icon {
                width: 44px;
                height: 44px;
            }
            
            .subtitle {
                font-size: 0.9rem;
            }
            
            .chat-header {
                padding: 12px 15px;
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
            
            .model-info, .connection-status {
                font-size: 0.8rem;
                padding: 5px 12px;
            }
            
            .chat-messages {
                padding: 12px;
            }
            
            .message {
                max-width: 90%;
                padding: 14px 16px;
                font-size: 0.95rem;
            }
            
            .chat-input-container {
                padding: 12px;
            }
            
            .example-question {
                padding: 8px 16px;
                font-size: 0.85rem;
                max-width: calc(50% - 10px);
                text-overflow: ellipsis;
                white-space: nowrap;
                overflow: hidden;
            }
            
            .scroll-indicator {
                bottom: 70px;
                right: 15px;
                width: 28px;
                height: 28px;
            }
            
            .scroll-indicator i {
                font-size: 0.8rem;
            }
        }
        
        @media (max-width: 480px) {
            :root {
                --input-height: 46px;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            .logo-icon {
                width: 40px;
                height: 40px;
            }
            
            .logo-icon i {
                font-size: 1.5rem;
            }
            
            .example-questions {
                gap: 8px;
            }
            
            .example-question {
                padding: 7px 14px;
                font-size: 0.8rem;
                max-width: 100%;
            }
            
            .message {
                max-width: 95%;
            }
            
            .chat-input input {
                padding: 0 15px;
                font-size: 0.95rem;
            }
        }
        
        /* Desktop-specific enhancements */
        @media (min-width: 769px) {
            .container {
                max-height: 90vh;
            }
            
            .chat-container {
                max-height: 70vh;
            }
            
            .example-question {
                transition: transform 0.2s, box-shadow 0.2s;
            }
            
            .send-btn:hover {
                transform: scale(1.05);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-robot"></i>
                </div>
                <h1>BM AI Assistant</h1>
            </div>
            <p class="subtitle">Get instant answers to your questions with our advanced AI assistant</p>
            
            <div class="example-questions">
                <div class="example-question">Explain quantum computing</div>
                <div class="example-question">How to make sourdough starter?</div>
                <div class="example-question">Best way to learn a language</div>
                <div class="example-question">History of the internet</div>
            </div>
        </header>
        
        <main>
            <div class="chat-container">
                <div class="chat-header">
                    <div class="connection-status">
                        <span class="status-indicator status-connected" id="status-indicator"></span>
                        <span>Connected</span>
                    </div>
                    <div class="model-info">
                        <i class="fas fa-microchip"></i>
                        <span>Bekimoon 2.1</span>
                    </div>
                </div>
                
                <div class="chat-messages" id="chat-messages">
                    <div class="message ai-message">
                        Hello! I'm your AI assistant. Ask me anything - I can help with explanations, ideas, calculations, and more. Try one of the example questions above or ask your own!
                    </div>
                    
                    <div class="error-message" id="error-message">
                        There was an error processing your request. Please try again later.
                    </div>
                    
                    <div class="typing-indicator" id="typing-indicator">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                    
                    <div class="scroll-indicator" id="scroll-indicator">
                        <i class="fas fa-arrow-down"></i>
                    </div>
                </div>
                
                <div class="chat-input-container">
                    <div class="chat-input">
                        <input type="text" id="user-input" placeholder="Type your question here..." autocomplete="off">
                        <button id="send-btn" class="send-btn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </main>
        
        <footer>
            <p>BM 2025 | All rights reserved</p>
            <div class="powered-by">
                <span>Powered by Bekimoon AI</span>
            </div>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const userInput = document.getElementById('user-input');
            const sendBtn = document.getElementById('send-btn');
            const chatMessages = document.getElementById('chat-messages');
            const typingIndicator = document.getElementById('typing-indicator');
            const exampleQuestions = document.querySelectorAll('.example-question');
            const errorMessage = document.getElementById('error-message');
            const statusIndicator = document.getElementById('status-indicator');
            const scrollIndicator = document.getElementById('scroll-indicator');
            
            // API configuration
            const API_KEY = "ff8353813fdf425a7d77c7d21c2211b24d98a989aaccdd6e6a7485580160ca7b";
            const API_ENDPOINT = "https://api.together.ai/v1/chat/completions";
            const MODEL = "meta-llama/Meta-Llama-3.1-8B-Instruct-Turbo";
            
            // Focus input on load
            setTimeout(() => userInput.focus(), 300);
            
            // Function to add a message to the chat
            function addMessage(content, isUser = false) {
                const messageDiv = document.createElement('div');
                messageDiv.classList.add('message');
                messageDiv.classList.add(isUser ? 'user-message' : 'ai-message');
                
                if (isUser) {
                    messageDiv.textContent = content;
                } else {
                    // For AI messages, create container for typing animation
                    const textContainer = document.createElement('div');
                    textContainer.className = 'typing-text';
                    textContainer.textContent = '';
                    messageDiv.appendChild(textContainer);
                    
                    // Create blinking cursor
                    const cursor = document.createElement('span');
                    cursor.className = 'typing-cursor';
                    messageDiv.appendChild(cursor);
                }
                
                chatMessages.appendChild(messageDiv);
                scrollToBottom();
                return messageDiv;
            }
            
            // Function to simulate typing effect
            function typeMessage(element, message, speed = 20) {
                return new Promise((resolve) => {
                    const textElement = element.querySelector('.typing-text');
                    const cursor = element.querySelector('.typing-cursor');
                    let i = 0;
                    
                    // Remove cursor during typing
                    cursor.style.display = 'none';
                    
                    const typeInterval = setInterval(() => {
                        if (i < message.length) {
                            textElement.textContent += message.charAt(i);
                            i++;
                            
                            // Scroll to bottom periodically
                            if (i % 5 === 0) scrollToBottom();
                        } else {
                            clearInterval(typeInterval);
                            
                            // Show cursor after typing
                            cursor.style.display = 'inline-block';
                            resolve();
                        }
                    }, speed);
                });
            }
            
            // Function to show/hide typing indicator
            function showTyping(show) {
                typingIndicator.style.display = show ? 'flex' : 'none';
                scrollToBottom();
            }
            
            // Function to show error message
            function showError(message) {
                errorMessage.textContent = message || 'There was an error processing your request. Please try again later.';
                errorMessage.style.display = 'block';
                setTimeout(() => {
                    errorMessage.style.display = 'none';
                }, 5000);
                scrollToBottom();
            }
            
            // Update connection status
            function updateConnectionStatus(connected) {
                statusIndicator.className = 'status-indicator ' + (connected ? 'status-connected' : 'status-disconnected');
                statusIndicator.nextElementSibling.textContent = connected ? 'Connected' : 'Disconnected';
            }
            
            // Scroll to bottom of chat
            function scrollToBottom() {
                chatMessages.scrollTop = chatMessages.scrollHeight;
                checkScrollIndicator();
            }
            
            // Check if we need to show scroll indicator
            function checkScrollIndicator() {
                const isAtBottom = chatMessages.scrollHeight - chatMessages.clientHeight <= chatMessages.scrollTop + 50;
                scrollIndicator.classList.toggle('visible', !isAtBottom);
            }
            
            // Scroll to bottom when indicator is clicked
            scrollIndicator.addEventListener('click', scrollToBottom);
            
            // Check scroll position periodically
            chatMessages.addEventListener('scroll', checkScrollIndicator);
            
            // Function to get AI response from Together API
            async function getAIResponseFromTogetherAPI(question) {
                try {
                    updateConnectionStatus(true);
                    
                    const response = await fetch(API_ENDPOINT, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${API_KEY}`
                        },
                        body: JSON.stringify({
                            model: MODEL,
                            messages: [
                                {
                                    role: "system",
                                    content: "You are a helpful assistant. Provide clear, concise, and accurate answers to the user's questions. Format your answers for readability. don't add hash tags and star sign's to answer, your name is bekimoon, your creater is bereket amare"
                                },
                                {
                                    role: "user",
                                    content: question
                                }
                            ],
                            max_tokens: 1024,
                            temperature: 0.7,
                            top_p: 0.7,
                            top_k: 50,
                            repetition_penalty: 1,
                            stop: ["</s>"]
                        })
                    });
                    
                    if (!response.ok) {
                        throw new Error(`API request failed: ${response.status}`);
                    }
                    
                    const data = await response.json();
                    return data.choices[0].message.content;
                } catch (error) {
                    console.error('API Error:', error);
                    updateConnectionStatus(false);
                    throw error;
                }
            }
            
            // Handle send button click
            sendBtn.addEventListener('click', async function() {
                const question = userInput.value.trim();
                if (!question) return;
                
                // Add user message
                addMessage(question, true);
                userInput.value = '';
                
                // Show typing indicator
                showTyping(true);
                
                // Disable button during processing
                sendBtn.disabled = true;
                
                try {
                    // Get AI response from Together API
                    const response = await getAIResponseFromTogetherAPI(question);
                    
                    // Remove typing indicator
                    showTyping(false);
                    
                    // Create AI message element
                    const aiMessageElement = addMessage('', false);
                    
                    // Type out the response
                    await typeMessage(aiMessageElement, response);
                } catch (error) {
                    showTyping(false);
                    showError(error.message);
                } finally {
                    // Re-enable button
                    sendBtn.disabled = false;
                    
                    // Focus input for next question
                    userInput.focus();
                    
                    // Scroll to bottom after everything is done
                    scrollToBottom();
                }
            });
            
            // Handle Enter key
            userInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendBtn.click();
                }
            });
            
            // Example question click handlers
            exampleQuestions.forEach(question => {
                question.addEventListener('click', function() {
                    const questionText = this.textContent;
                    userInput.value = questionText;
                    userInput.focus();
                });
            });
            
            // Initial connection check
            updateConnectionStatus(true);
            
            // Initial scroll check
            checkScrollIndicator();
        });
    </script>
</body>

</html>
